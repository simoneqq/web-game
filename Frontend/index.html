<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Gra FPS Three.js - Poprawiona</title>
    <link rel="stylesheet" href="/public/styles/style.css" />
    <link rel="stylesheet" href="/public/styles/ui.css" />
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three/examples/jsm/libs/stats.module.js": "https://unpkg.com/three@0.160.0/examples/jsm/libs/stats.module.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="main-menu">
      <h1>MENU</h1>

      <form onsubmit="return updateColor(event)">
        <p>CHOOSE YOUR COLOR:&nbsp;&nbsp;<input type="color" name="playerColorPicker" id="playerColorPicker" value="#ff0000"/>&nbsp;&nbsp;<button type="submit">Wybierz</button></p>
      </form>
      <script>
        function updateColor(event) {
          event.preventDefault();
          const colorInput = document.getElementById("playerColorPicker");
          const selectedColor = colorInput.value;
          
          // Zapisz kolor w localStorage do użycia przy starcie gry
          localStorage.setItem('playerColor', selectedColor);
          
          return false;
        }
      </script>
      
      <p>tu mozna dac jakies wybieranie kolorow itp</p>
      <button id="start-game-btn" class="start-btn">ZAGRAJ</button>
    </div>

    <div id="ui-layer">
      <!-- OBRAMÓWKA GRACZA -->
      <div id="player-border">
        <div class="border-left"></div>
        <div class="border-right"></div>
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
      </div>

      <div id="pause-screen">
        <div>
          <div class="button-container">
            <h1>PAUSED</h1>
            <div id="resume-btn" class="custom-button">
              <span class="btn-text">RESUME</span>
            </div>
            <div id="options-btn" class="custom-button">
              <span class="btn-text">OPTIONS</span>
            </div>
            <div id="leave-btn" class="custom-button">
              <span class="btn-text">LEAVE</span>
            </div>
          </div>
        </div>
      </div>

      <div id="crosshair"></div>

      <div id="slide-cooldown-container">
        <progress id="slide-cooldown-bar" value="1" max="1"></progress>
        <span class="slide-label">Slide</span>
      </div>

      <div id="stamina-container">
        <div id="stamina-label">Stamina</div>
        <progress id="stamina-bar" value="120" max="120"></progress>
      </div>
    </div>
    <!-- Socket.io - musi być przed main.js -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- Twój główny skrypt gry -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>