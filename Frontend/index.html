<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Three.js fps</title>
    <link rel="stylesheet" href="/public/styles/style.css" />
    <link rel="stylesheet" href="/public/styles/ui.css" />

    <link rel="icon" type="image/png" href="/public/textures/splat.png"/>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three/examples/jsm/libs/stats.module.js": "https://unpkg.com/three@0.160.0/examples/jsm/libs/stats.module.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="main-menu">
      <div class="menu-content glass-panel">
        <h1 class="game-title">Three.js fps</h1>

        <form onsubmit="return updatePlayer(event);" id="player-form">
          <div class="input-group">
            <label for="playerNameInput">NICKNAME</label>
            <input
              type="text"
              id="playerNameInput"
              name="playerNameInput"
              placeholder="Wpisz swój nick..."
              maxlength="15"
              autocomplete="off"
            />
          </div>

          <div class="input-group">
            <label for="playerColorPicker">COLOR</label>
            <div class="color-picker-wrapper">
              <input
                  type="color"
                  name="playerColorPicker"
                  id="playerColorPicker"
                  value="#ff0000"
              />
            </div>
          </div>

          <button id="start-game-btn" class="custom-button start-btn" type="submit">
            <span class="btn-text">PLAY</span>
          </button>
        </form>
      </div>

      <script>
        function updatePlayer(event) {
          event.preventDefault();
          const colorInput = document.getElementById("playerColorPicker");
          const selectedColor = colorInput.value;
          const playerNameInput = document.getElementById("playerNameInput");
          const playerName = playerNameInput.value || "Player";

          localStorage.setItem("playerColor", selectedColor);
          localStorage.setItem("playerName", playerName);
          return false;
        }
      </script>
    </div>

    <div id="ui-layer">
      <div id="damage-overlay"></div>

      <div id="death-screen">
        <div class="death-container glass-panel error-panel">
          <h1 class="death-title">YOU DIED</h1>
          <p class="death-message">You were eliminated!</p>
          <div id="respawn-btn" class="custom-button respawn-button">
            <span class="btn-text">RESPAWN</span>
          </div>
        </div>
      </div>

      <div id="player-border">
        <div class="border-left"></div>
        <div class="border-right"></div>
      </div>

      <div id="pause-screen">
        <div class="glass-panel pause-container">
            <h1 class="game-title small-title">PAUSED</h1>
            <div class="pause-buttons">
              <div id="resume-btn" class="custom-button">
                <span class="btn-text">RESUME</span>
              </div>
              <div id="keybinds-btn" class="custom-button">
                <span class="btn-text">CONTROLS</span>
              </div>
            </div>
        </div>
      </div>

      <div id="keybinds-screen">
        <div class="keybinds-container glass-panel">
          <h1 class="keybinds-title">CONTROLS</h1>
          
          <div class="keybinds-grid">
            <div class="keybind-row">
              <div class="keybind-key">W A S D</div>
              <div class="keybind-desc">Movement</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">MOUSE</div>
              <div class="keybind-desc">Look Around</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">LMB</div>
              <div class="keybind-desc">Shoot</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">SPACE</div>
              <div class="keybind-desc">Jump</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">SHIFT</div>
              <div class="keybind-desc">Sprint</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">CTRL</div>
              <div class="keybind-desc">Crouch</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">C</div>
              <div class="keybind-desc">Slide</div>
            </div>
            <div class="keybind-row">
              <div class="keybind-key">ENTER</div>
              <div class="keybind-desc">Chat</div>
            </div>
          </div>
          
          <div id="keybinds-back-btn" class="custom-button back-button">
            <span class="btn-text">BACK</span>
          </div>
        </div>
      </div>

      <div id="chat-container">
        <div id="chat-messages"></div>
        <input type="text" id="chat-input" placeholder="Naciśnij Enter..." autocomplete="off"/>
      </div>

      <div id="scoreboard">
        <div class="scoreboard-header">
          <span>#</span><span>Player</span><span>Kills</span>
        </div>
        <div id="scoreboard-list"></div>
      </div>

      <div id="crosshair"></div>
      <div id="hearts-container"></div>
      <div id="nick-container">
        <div class="player-nick-color-box"></div>
        <div class="player-nick">Player</div>
      </div>

      <div id="slide-cooldown-container">
        <progress id="slide-cooldown-bar" value="1" max="1"></progress>
        <span class="slide-label">Slide</span>
      </div>

      <div id="stamina-container">
        <div id="stamina-label">Stamina</div>
        <progress id="stamina-bar" value="120" max="120"></progress>
      </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>