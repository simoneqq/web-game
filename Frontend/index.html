<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Gra FPS Three.js - Poprawiona</title>
    <link rel="stylesheet" href="/public/styles/style.css" />
    <link rel="stylesheet" href="/public/styles/ui.css" />
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three/examples/jsm/libs/stats.module.js": "https://unpkg.com/three@0.160.0/examples/jsm/libs/stats.module.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="main-menu">
      <h1>MENU</h1>

      <form onsubmit="return updatePlayer(event);" id="player-form">
        <p>
          <label for="playerColorPicker"> CHOOSE YOUR COLOR:&nbsp;&nbsp;</label
          ><input
            type="color"
            name="playerColorPicker"
            id="playerColorPicker"
            value="#ff0000"
          />
        </p>
        <p>
          <label for="playerNameInput">CHOOSE YOUR NAME:&nbsp;&nbsp;</label
          ><input
            type="text"
            id="playerNameInput"
            name="playerNameInput"
            placeholder="Player"
            maxlength="50"
          />
        </p>

        <button id="start-game-btn" class="start-btn" type="submit">
          ZAGRAJ
        </button>
      </form>
      <script>
        function updatePlayer(event) {
          event.preventDefault();
          // Pobieranie koloru gracza
          const colorInput = document.getElementById("playerColorPicker");
          const selectedColor = colorInput.value;

          // Pobieranie nicku
          const playerNameInput = document.getElementById("playerNameInput");
          const playerName = playerNameInput.value || "Player"; // Jak nic nie wpisze to Player

          // Zapisz kolor i nick w localStorage do użycia przy starcie gry
          localStorage.setItem("playerColor", selectedColor);
          localStorage.setItem("playerName", playerName);

          return false;
        }
      </script>
    </div>

    <div id="ui-layer">
      <!-- DAMAGE OVERLAY -->
      <div id="damage-overlay"></div>

      <!-- EKRAN ŚMIERCI -->
      <div id="death-screen">
        <div class="death-container">
          <h1 class="death-title">YOU DIED</h1>
          <p class="death-message">You were eliminated!</p>
          <div id="respawn-btn" class="custom-button respawn-button">
            <span class="btn-text">RESPAWN</span>
          </div>
        </div>
      </div>

      <!-- OBRAMÓWKA GRACZA -->
      <div id="player-border">
        <div class="border-left"></div>
        <div class="border-right"></div>
      </div>
      <!-- EKRAN PAUZY -->
      <div id="pause-screen">
        <div>
          <div class="button-container">
            <h1>PAUSED</h1>
            <div id="resume-btn" class="custom-button">
              <span class="btn-text">RESUME</span>
            </div>
            <div id="options-btn" class="custom-button">
              <span class="btn-text">OPTIONS</span>
            </div>
            <div id="leave-btn" class="custom-button">
              <span class="btn-text">LEAVE</span>
            </div>
          </div>
        </div>
      </div>

      <div id="chat-container">
        <div id="chat-messages"></div>
        <input
          type="text"
          id="chat-input"
          placeholder="Naciśnij Enter, aby pisać..."
          autocomplete="off"
        />
      </div>

      <div id="scoreboard">
        <div class="scoreboard-header">
          <span>#</span>
          <span>Gracz</span>
          <span>Kille</span>
        </div>
        <div id="scoreboard-list"></div>
      </div>

      <div id="crosshair"></div>

      <!-- HP Hearts -->
      <div id="hearts-container"></div>

      <div id="nick-container">
        <div class="player-nick-color-box"></div>
        <div class="player-nick">Player</div>
        <!-- tu wpisuje sie nick gracza -->
      </div>

      <div id="slide-cooldown-container">
        <progress id="slide-cooldown-bar" value="1" max="1"></progress>
        <span class="slide-label">Slide</span>
      </div>

      <div id="stamina-container">
        <div id="stamina-label">Stamina</div>
        <progress id="stamina-bar" value="120" max="120"></progress>
      </div>
    </div>
    <!-- Socket.io - musi być przed main.js -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- Twój główny skrypt gry -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
